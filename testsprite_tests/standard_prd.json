{
  "projectName": "ROSAgo - School Transport Management System",
  "version": "1.0.0",
  "overview": "Enterprise-grade school bus transport management system with real-time tracking, multi-tenancy, and comprehensive child safety features",
  "features": [
    {
      "id": "auth",
      "name": "Authentication & Authorization",
      "description": "JWT-based multi-role authentication system",
      "priority": "critical",
      "endpoints": [
        "POST /auth/login",
        "POST /auth/refresh",
        "POST /auth/logout",
        "POST /auth/forgot-password",
        "POST /auth/reset-password"
      ],
      "testCases": 12
    },
    {
      "id": "multi-tenancy",
      "name": "Multi-Tenancy & Data Isolation",
      "description": "Company and school-level data isolation",
      "priority": "critical",
      "endpoints": [
        "GET /admin/company/:companyId/*"
      ],
      "testCases": 8
    },
    {
      "id": "child-management",
      "name": "Child Onboarding & Management",
      "description": "Bulk onboarding, unique code linking, and profile management",
      "priority": "critical",
      "endpoints": [
        "POST /children/bulk-onboard",
        "POST /children/link",
        "GET /children",
        "PATCH /children/:id",
        "POST /children/:id/assign-route"
      ],
      "testCases": 15
    },
    {
      "id": "bus-driver",
      "name": "Bus & Driver Management",
      "description": "Fleet and driver management with assignments",
      "priority": "high",
      "endpoints": [
        "POST /buses",
        "GET /buses/company/:companyId",
        "POST /drivers",
        "PATCH /drivers/:id"
      ],
      "testCases": 10
    },
    {
      "id": "routes",
      "name": "Route & Stop Management",
      "description": "Route creation with ordered stops and bus assignments",
      "priority": "high",
      "endpoints": [
        "POST /routes",
        "GET /routes",
        "PATCH /routes/:id"
      ],
      "testCases": 12
    },
    {
      "id": "scheduled-routes",
      "name": "Scheduled Routes & Trip Generation",
      "description": "Recurring route schedules and automatic trip generation",
      "priority": "high",
      "endpoints": [
        "POST /scheduled-routes",
        "PUT /scheduled-routes/:id/activate",
        "POST /trips/generate-today"
      ],
      "testCases": 18
    },
    {
      "id": "gps-tracking",
      "name": "Real-Time GPS Tracking",
      "description": "Live bus location tracking with WebSocket updates",
      "priority": "critical",
      "endpoints": [
        "POST /gps/update",
        "GET /gps/bus/:busId/location",
        "WebSocket /realtime"
      ],
      "testCases": 14
    },
    {
      "id": "attendance",
      "name": "Attendance Management",
      "description": "Pick-up and drop-off attendance tracking",
      "priority": "high",
      "endpoints": [
        "POST /attendance/mark",
        "GET /attendance/trip/:tripId"
      ],
      "testCases": 10
    },
    {
      "id": "early-pickup",
      "name": "Early Pickup Requests",
      "description": "Parent early pickup request workflow",
      "priority": "medium",
      "endpoints": [
        "POST /early-pickup/request",
        "GET /early-pickup/driver"
      ],
      "testCases": 8
    },
    {
      "id": "location-change",
      "name": "Location Change Requests",
      "description": "Home location update approval workflow",
      "priority": "medium",
      "endpoints": [
        "POST /children/:id/location-change",
        "PUT /location-change/:id/approve"
      ],
      "testCases": 8
    },
    {
      "id": "payments",
      "name": "Payment Processing",
      "description": "Payment plans and transaction processing",
      "priority": "high",
      "endpoints": [
        "POST /payments/initialize",
        "POST /payments/webhook"
      ],
      "testCases": 12
    },
    {
      "id": "notifications",
      "name": "Notifications System",
      "description": "Push notifications for trip and system events",
      "priority": "medium",
      "endpoints": [
        "POST /notifications/send",
        "GET /notifications/user/:userId"
      ],
      "testCases": 10
    },
    {
      "id": "analytics",
      "name": "Analytics & Reporting",
      "description": "Dashboard statistics and business reports",
      "priority": "low",
      "endpoints": [
        "GET /analytics/company/:companyId",
        "GET /analytics/trip-stats"
      ],
      "testCases": 8
    }
  ],
  "techStack": {
    "backend": "NestJS + TypeScript",
    "database": "PostgreSQL + Prisma",
    "cache": "Redis",
    "realtime": "Socket.IO",
    "queue": "BullMQ"
  },
  "totalTestCases": 257,
  "apiDocumentation": "../API_DOCS.md",
  "testGenerationGuidelines": {
    "authTokenFormat": "snake_case (access_token, refresh_token)",
    "parentEndpointRestrictions": [
      "Parents CANNOT access GET /children - use GET /children/parent/:parentId instead",
      "Parents CANNOT access POST /children/bulk-onboard - admin only"
    ],
    "testCredentialUsage": [
      "TC001-TC005: Use parent credentials for auth tests",
      "TC006: Use companyAdmin credentials, endpoint is GET /admin/stats/company/:companyId",
      "TC007: Use companyAdmin credentials, expect 201 Created for bulk-onboard",
      "TC008: Use parent credentials, do NOT use bulk-onboard for setup",
      "TC009: Use parent credentials with GET /children/parent/:parentId endpoint",
      "TC010: Use parent credentials, do NOT use bulk-onboard for setup"
    ],
    "childCreationSetup": "For tests needing child setup, use admin to create via bulk-onboard OR skip setup if testing parent-only endpoints"
  },
  "testEnvironment": {
    "baseUrl": "http://localhost:3000",
    "databaseUrl": "postgresql://postgres:postgres123@localhost:5432/rosago_dev",
    "testCredentials": {
      "parent": {
        "email": "parent@test.com",
        "password": "Test@1234"
      },
      "driver": {
        "email": "driver@saferide.com",
        "password": "Test@1234"
      },
      "companyAdmin": {
        "email": "admin@saferide.com",
        "password": "Test@1234"
      },
      "platformAdmin": {
        "email": "platform@saferide.com",
        "password": "Test@1234"
      }
    }
  }
}
